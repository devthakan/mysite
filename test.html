<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>कानोड़ GSSS — जीवन सुरक्षा क्लेम</title>
  <meta name="theme-color" content="#4f46e5" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+Devanagari:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0f172a;           /* slate-900 */
      --bg2:#111827;          /* gray-900 */
      --card:#0b1224aa;       /* glass card */
      --text:#e5e7eb;         /* gray-200 */
      --muted:#9ca3af;        /* gray-400 */
      --brand:#4f46e5;        /* indigo-600 */
      --brand-2:#22d3ee;      /* cyan-400 */
      --ring:#93c5fd55;       /* blue-300/33 */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      font-family:"Inter","Noto Sans Devanagari",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background: radial-gradient(1200px 1200px at 10% 10%, #1e293b 0%, #0b1020 50%, #05070f 100%);
      overflow-x:hidden;
    }

    /* ---------- Top Nav ---------- */
    .nav{
      position:sticky; top:0; z-index:40;
      backdrop-filter:saturate(120%) blur(10px);
      background:linear-gradient(180deg, rgba(5,7,15,.8), rgba(5,7,15,.35));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .nav-inner{
      max-width:1100px; margin:auto; padding:14px 18px;
      display:flex; align-items:center; gap:14px; justify-content:space-between;
    }
    .brand{
      display:flex; gap:12px; align-items:center; font-weight:700; letter-spacing:.2px;
    }
    .logo{
      width:34px; height:34px; display:grid; place-items:center;
      border-radius:12px;
      background: conic-gradient(from 30deg, var(--brand), #7c3aed, var(--brand-2), var(--brand));
      box-shadow:0 8px 32px #4f46e544, inset 0 0 18px #ffffff22;
    }
    .brand-title{font-size:1.05rem}
    .nav-actions a{
      color:var(--text); text-decoration:none; font-weight:600;
      padding:10px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.08);
      background:#0b1020a6;
    }
    .nav-actions a:hover{border-color:#ffffff22}

    /* ---------- Hero Section ---------- */
    .hero{
      max-width:1100px; margin:36px auto 18px; padding:0 18px;
    }
    .title{
      font-size: clamp(1.4rem, 1.1rem + 1.8vw, 2rem);
      font-weight:800; line-height:1.2;
      background:linear-gradient(90deg, #fff, #c7d2fe, #a5f3fc);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      margin:0 0 8px 0;
    }
    .subtitle{color:var(--muted); margin:0}

    /* ---------- Card ---------- */
    .card{
      position:relative;
      max-width:1100px; margin:22px auto; padding:0; border-radius:20px;
      background:linear-gradient(180deg, #0b1224cc, #0b122499);
      border:1px solid rgba(255,255,255,.08);
      box-shadow: 0 10px 40px #00000066, inset 0 0 0 1px rgba(255,255,255,.04);
      overflow:hidden;
    }
    .card-head{
      padding:16px 18px; display:flex; align-items:center; gap:10px;
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .chip{
      font-weight:700; font-size:.74rem; letter-spacing:.3px;
      padding:6px 10px; border-radius:999px; color:#0b1224;
      background:linear-gradient(90deg, #a5f3fc, #c7d2fe);
      box-shadow:0 6px 20px #22d3ee33;
    }
    .card-body{position:relative; min-height:70vh; background:#05070f;}

    /* ---------- Loader Overlay ---------- */
    .overlay{
      position:absolute; inset:0; display:grid; place-items:center;
      padding:24px; background:linear-gradient(180deg, rgba(5,7,15,.92), rgba(5,7,15,.75));
    }
    .overlay.hidden{display:none;}

    .loader{
      width:min(540px, 92vw);
      padding:26px 22px; border-radius:18px;
      background:linear-gradient(180deg, rgba(15,23,42,.8), rgba(15,23,42,.6));
      border:1px solid rgba(255,255,255,.08);
      box-shadow:0 20px 60px #00000088, inset 0 0 0 1px rgba(255,255,255,.05);
    }
    .loader-top{
      display:flex; align-items:center; gap:14px; margin-bottom:14px;
    }
    .pulse-dots{display:flex; gap:8px;}
    .dot{
      width:10px; height:10px; border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #fff, #a5f3fc);
      box-shadow:0 0 16px #22d3ee88;
      animation:bounce 1.1s infinite ease-in-out;
    }
    .dot:nth-child(2){animation-delay:.15s}
    .dot:nth-child(3){animation-delay:.3s}
    @keyframes bounce{
      0%,80%,100%{ transform:translateY(0); opacity:.75}
      40%{ transform:translateY(-6px); opacity:1}
    }

    .loader-title{font-weight:800; font-size:1.05rem; margin:0}
    .loader-text{margin:2px 0 10px; color:var(--muted); font-size:.95rem}

    .progress{
      width:100%; height:10px; border-radius:999px; background:#0b1224;
      overflow:hidden; border:1px solid rgba(255,255,255,.07);
    }
    .bar{
      height:100%; width:30%; border-radius:999px;
      background:linear-gradient(90deg, var(--brand), #7c3aed, var(--brand-2));
      animation:load 1.6s ease-in-out infinite;
      box-shadow:0 0 18px #4f46e577;
    }
    @keyframes load{
      0%{transform:translateX(-120%)}
      50%{transform:translateX(35%) scaleX(1.2)}
      100%{transform:translateX(220%)}
    }

    /* ---------- Failure state ---------- */
    .fail{ text-align:center; display:none; }
    .fail.show{ display:block; }
    .fail p{ color:var(--muted); margin:10px 0 18px; }
    .btn{
      display:inline-flex; align-items:center; gap:10px;
      padding:12px 16px; border-radius:12px; font-weight:700;
      color:white; background:linear-gradient(90deg, var(--brand), #7c3aed);
      border:0; cursor:pointer;
      box-shadow:0 10px 30px #4f46e544;
    }
    .btn:active{ transform:translateY(1px) }

    /* ---------- Iframe ---------- */
    iframe{
      width:100%; height:70vh; border:0; display:block;
    }
    .iframe--hidden{visibility:hidden}

    /* ---------- Footer ---------- */
    footer{
      max-width:1100px; margin:18px auto 40px; padding:0 18px; color:#94a3b8; font-size:.9rem;
    }
  </style>
</head>
<body>
  <!-- Top nav -->
  <div class="nav">
    <div class="nav-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="brand-title">कानोड़ ग्राम सेवा सहकारी समिति लि०</div>
      </div>
      <div class="nav-actions">
        <a href="#" onclick="window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'})">सहायता</a>
      </div>
    </div>
  </div>

  <!-- Hero -->
  <section class="hero">
    <h1 class="title">जीवन सुरक्षा क्लेम फॉर्म — तेज़ और सुरक्षित</h1>
    <p class="subtitle">आधार संख्या डालकर जानकारी देखें। नीचे दिया गया फॉर्म सीधे समिति के वेब-ऐप से लोड होता है।</p>
  </section>

  <!-- Card -->
  <section class="card" aria-label="जीवन सुरक्षा फॉर्म">
    <div class="card-head">
      <span class="chip">LIVE FORM</span>
      <span style="color:var(--muted)">Kanod GSSS • Google Apps Script</span>
    </div>

    <div class="card-body">
      <!-- Loader while iframe loads -->
      <div id="overlay" class="overlay" role="status" aria-live="polite">
        <div class="loader">
          <div class="loader-top">
            <div class="pulse-dots" aria-hidden="true">
              <span class="dot"></span><span class="dot"></span><span class="dot"></span>
            </div>
            <h3 class="loader-title">पेज तैयार किया जा रहा है…</h3>
          </div>
          <p class="loader-text" id="loaderMsg">सुरक्षित कनेक्शन बना रहे हैं। कृपया कुछ क्षण प्रतीक्षा करें।</p>
          <div class="progress" aria-hidden="true"><div class="bar"></div></div>

          <div class="fail" id="failBox">
            <p>लगता है नेटवर्क धीमा है या पेज एम्बेड होने में दिक्कत आ रही है।</p>
            <button class="btn" id="retryBtn">फिर से लोड करें</button>
            <a class="btn" style="margin-left:8px; text-decoration:none"
               id="openNew" target="_blank" rel="noopener">नये टैब में खोलें</a>
          </div>
        </div>
      </div>

      <!-- Embedded App Script -->
      <iframe id="appFrame" class="iframe--hidden"
        title="जीवन सुरक्षा क्लेम फॉर्म"
        referrerpolicy="no-referrer-when-downgrade"
        allow="fullscreen; clipboard-write">
      </iframe>
    </div>
  </section>

  <footer>
    © <span id="yr"></span> Kanod GSSS • Built for members. यदि पेज embed न हो तो ऊपर “नये टैब में खोलें” दबाएँ।
  </footer>

  <script>
    // --------- CONFIG ---------
    const APP_URL = "https://script.google.com/macros/s/AKfycbxJULwbQuH3exucCeKjltraQkV_xRWxKynMXnH89iL175t98UyoNSKBsmcCjJNIf3E72Q/exec";

    const frame = document.getElementById("appFrame");
    const overlay = document.getElementById("overlay");
    const failBox = document.getElementById("failBox");
    const retryBtn = document.getElementById("retryBtn");
    const openNew = document.getElementById("openNew");
    const loaderMsg = document.getElementById("loaderMsg");
    document.getElementById("yr").textContent = new Date().getFullYear();

    // Helper: show/hide
    function hide(el){ el.classList.add("hidden"); }
    function show(el){ el.classList.remove("hidden"); }

    // Load iframe
    function mountIframe(){
      failBox.classList.remove("show");
      loaderMsg.textContent = "सुरक्षित कनेक्शन बना रहे हैं। कृपया कुछ क्षण प्रतीक्षा करें।";
      show(overlay);
      frame.classList.add("iframe--hidden");
      frame.src = APP_URL + (APP_URL.includes("?") ? "&" : "?") + "t=" + Date.now(); // cache-bust
    }

    // When iframe is ready
    let done = false;
    frame.addEventListener("load", ()=>{
      done = true;
      hide(overlay);
      frame.classList.remove("iframe--hidden");
    });

    // Progressive status nudges
    setTimeout(()=>{ if(!done) loaderMsg.textContent = "डेटा ला रहे हैं… इंटरनेट स्पीड पर निर्भर है."; }, 3000);
    setTimeout(()=>{ if(!done) loaderMsg.textContent = "लगभग हो गया! कृपया थोड़ा और इंतज़ार करें…"; }, 7000);

    // Failover after 20s
    setTimeout(()=>{
      if(!done){
        loaderMsg.textContent = "लोड होने में अपेक्षा से अधिक समय लग रहा है।";
        failBox.classList.add("show");
      }
    }, 20000);

    retryBtn.addEventListener("click", mountIframe);
    openNew.href = APP_URL;

    // Kick-off
    mountIframe();
  </script>
</body>
</html>
